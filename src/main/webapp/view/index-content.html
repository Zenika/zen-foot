<div data-ng-controller="MatchCtrl">


    <div class="row">

        <div class="col-xs-12">
            <div class="row">
                <div class="col-sm-4">
                    <div class="match-title">
                        <h2> Liste des matchs &nbsp; </h2>


                        <!--<span class="dropdown">


                            <span class="glyphicon glyphicon-info-sign" data-toggle="dropdown"></span>

                            <span class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                <h3 class="text-center">Pour parier sur un match, rentrez un score et cliquez sur "parier !"</h3>

                                <p style="margin-bottom: 0px">Si vous avez le score exact, vous gagnez 3 points.</p>

                                <p> Si vous avez le bon gagnant et un score inexact, vous gagnez 1 point</p>
                            </span>
                        </span>-->

                        <span popover-info class="glyphicon glyphicon-info-sign" data-toggle="popover"
                              data-placement="bottom"
                              data-content="Si vous avez le bon gagnant et un score inexact, vous gagnez 1 point. Si vous avez le score exact, vous gagnez 3 points">
                        </span>

                    </div>

                </div>
                <div class="col-sm-6 pull-left">

                    <div class="btn-group">
                        <!--<groupe-label data-ng-repeat="groupe in groupes" groupe="{{groupe}}"></groupe-label>-->
                        <label ng-repeat="groupe in groupes" class='btn btn-danger' ng-model='groupe.checked'
                               btn-checkbox>{{groupe.letter}}</label>
                    </div>
                    <div class="btn-group finales-blocks">
                        <label data-ng-repeat="(key,phase) in phases | orderBy:'order'" class="btn btn-danger disabled" data-ng-model="phase.checked" btn-checkbox>
                            {{phase.fraction}}<sup ng-show="phase.fraction==8">ème</sup>
                        </label>
                        &nbsp
                    </div>
                     <!--<span popover-info class="glyphicon glyphicon-info-sign" data-toggle="popover"
                           data-placement="bottom"
                           data-content="Sélectionnez un groupe à filtrer">
                     </span>-->
                </div>
            </div>


            <form name="scoreform" class="form-score form-horizontal match-form">
                <div data-ng-repeat="(groupe, matchs) in matchsBets"
                     data-ng-show="($index==0&&showAll())||groupes[groupe].checked">
                    <h3 data-ng-show="groupes[groupe].checked">Groupe {{groupes[groupe].letter}}</h3>


                    <div data-ng-repeat="match in matchs | orderBy:'match.date'">

                        <!--That's the column containing inputs, and results-->

                        <!--That's the row for inputs-->
                        <div class="row">
                            <div class="col-sm-2" ng-class="{'former-match':isFormer(match.match.date)}">
                                {{match.match.date|date:'dd/MM/yyyy à HH:mm'}}
                            </div>
                            <!--That's the column containing informations on inputs, without the date-->
                            <div class="col-sm-10">
                                <div class="row" ng-class="{'former-match':isFormer(match.match.date)}">
                                    <div class="col-xs-6 match-info">
                                        <div class="text-right">
                                            <span data-ng-class="{'zen-bold':isWinner(match.bet,'score1','score2')}">
                                                {{match.match.participant1.pays}}
                                            </span>

                                            <img class="country-flag" data-ng-src="img/flags/{{match.match.participant1.flagPath}}.png">

                                            <ng-form name="score1Form"
                                                     ng-class="{'has-error':score1Form.score1input.$error.pattern||score1Form.$invalid}">
                                                <input name="score1input"
                                                       class="form-control input-sm text-center input-score"
                                                       zen-disable
                                                       oldmatch="{{isFormer(match.match.date)}}"
                                                       data-ng-init="score1=match.bet.score1"
                                                       data-ng-model="score1.score"
                                                       ng-pattern=scoreRegexp
                                                       ng-required="hasTwoScores(match.bet)">
                                                <span class="label label-danger"
                                                      data-ng-show="score1Form.score1input.$error.pattern">score : entre 0 et 99</span>
                                            </ng-form>
                                            <div class="text-right">
                                                <span class="real-score">{{match.match.outcome.score1.score}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 match-info">
                                        <div class="text-left">

                                            <ng-form name="score2Form"
                                                     ng-class="{'has-error':score2Form.score2input.$error.pattern||score2Form.$invalid}">

                                                <input name="score2input"
                                                       class="form-control input-sm text-center input-score"
                                                       zen-disable
                                                       oldmatch="{{isFormer(match.match.date)}}"

                                                       data-ng-init="score2=match.bet.score2"
                                                       data-ng-model="score2.score"
                                                       ng-pattern=scoreRegexp

                                                       ng-required="hasTwoScores(match.bet)">

                                                <span class="label label-danger"
                                                      data-ng-show="score2Form.score2input.$error.pattern">score : entre 0 et 99</span>
                                            </ng-form>

                                            <img class="country-flag" data-ng-src="img/flags/{{match.match.participant2.flagPath}}.png">
                                            <span
                                                    data-ng-class="{'zen-bold':isWinner(match.bet,'score2','score1')}">
                                                {{match.match.participant2.pays}}
                                            </span>

                                            <!--<div class="col-sm-2 col-xs-2" data-ng-if="match.unreg"><span-->
                                            <!--class="label label-danger">non enregistr&eacute</span>-->
                                            <!--</div>-->
                                        </div>
                                        <div class="text-left">
                                            <span class="real-score">{{match.match.outcome.score2.score}}</span>
                                        </div>
                                    </div>
                                    <!--<div class="col-xs-1" ng-if="dispPoints(match)">-->
                                        <!--<img data-ng-src="{{calculatePoints(match)}}">-->
                                    <!--</div>-->
                                    <!--<div ng-if="dispPoints(match)" class="col-sm-2 zen-points">-->
                                    <!--{{calculatePoints(match)}} pts-->

                                    <!--</div>-->
                                </div>
                            </div>


                        </div>


                        </br>

                    </div>
                </div>


                <div class="pariez-button" data-ng-hide="modified">
                    <div class="container">
                    <button type="button" class="btn btn-danger pull-right " data-ng-disabled="scoreform.$invalid"
                            data-ng-click="postez()">Pariez !
                    </button>
                    </div>
                 </div>

            </form>
        </div>
    </div>


</div>





